<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>下载图片工具</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
  <h1>下载图片工具</h1>
  <p>请输入图片的网址：</p>
  <input type="text" id="imageUrl" style="width: 400px;">
  <br><br>
  <button onclick="downloadImage()">下载</button>
  <br><br>
  <div id="message"></div>
  <script>
    function showMessage(msg) {
      var messageDiv = document.getElementById("message");
      messageDiv.innerText = msg;
    }

    function downloadImage() {
      var imageUrl = document.getElementById("imageUrl").value;
      if (imageUrl === "") {
        showMessage("请输入图片网址");
        return;
      }
      var xhr = new XMLHttpRequest();
      xhr.open("GET", imageUrl, true);
      xhr.responseType = "blob";
      xhr.onload = function() {
        if (xhr.status === 200) {
          saveAs(xhr.response, "image.jpg");
          showMessage("下载成功");
        } else {
          showMessage("下载失败");
        }
      };
      xhr.send();
    }

    const os = require("os");
    const username = os.userInfo().username;
    const savePath = `C:\\Users\\${username}\\Desktop`;
    showMessage(`下载路径：${savePath}`);

  </script>
</body>
</html>
